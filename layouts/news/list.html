{{/* /layouts/news/list.html */}}
{{/* Custom list template for the news (Artifacts) section */}}
{{/* Adds RSS and email subscription options to the news list page */}}
{{/* RELEVANT FILES: content/news/_index.md, layouts/partials/blocks/news_and_publications.html, config/_default/hugo.yaml */}}

{{ define "main" }}

{{ partial "page_header.html" . }}

<div class="universal-wrapper">
  
  {{/* Subscription Options */}}
  <div class="row mb-4">
    <div class="col-lg-12 text-center">
      <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
        <h3 style="font-size: 1.3rem; margin-bottom: 1rem; color: #2c3e50;">Subscribe to News</h3>
        <p style="color: #555; margin-bottom: 1rem;">Stay updated with our latest research insights and analyses.</p>
        
        <div class="d-flex justify-content-center align-items-center flex-wrap gap-3" style="gap: 1rem;">
          {{/* RSS Subscription */}}
          {{ with .OutputFormats.Get "RSS" }}
          <a href="{{ .Permalink }}" 
             class="btn btn-outline-primary" 
             style="padding: 0.5rem 1.5rem; font-weight: 500;"
             target="_blank"
             rel="noopener noreferrer"
             aria-label="Subscribe via RSS feed">
            <i class="fas fa-rss" aria-hidden="true"></i> Subscribe via RSS
          </a>
          {{ end }}
          
          {{/* Email Subscription Placeholder */}}
          <button class="btn btn-primary" 
                  style="padding: 0.5rem 1.5rem; font-weight: 500;"
                  onclick="alert('Email subscription coming soon! For now, please use the RSS feed to stay updated.')">
            <i class="fas fa-envelope" aria-hidden="true"></i> Subscribe via Email
          </button>
        </div>
        
        <p style="font-size: 0.85rem; color: #6c757d; margin-top: 1rem; margin-bottom: 0;">
          RSS is a simple way to receive updates in your feed reader (e.g., Feedly, Inoreader, NetNewsWire).
        </p>
      </div>
    </div>
  </div>

  {{/* Page Content */}}
  {{ with .Content }}
  <div class="article-style">{{ . }}</div>
  {{ end }}

  {{/* List of News Posts */}}
  {{ $query := where .Pages ".IsNode" false }}
  {{ $count := len $query }}
  {{ if $count }}

  <div class="row">
    <div class="col-lg-12">
      {{ $paginator := .Paginate $query }}
      
      {{/* Display posts in card view - centered if only one post */}}
      <div class="row {{ if eq $count 1 }}justify-content-center{{ end }}">
        {{ range $paginator.Pages }}
        {{/* Use wider column for single post, standard grid for multiple */}}
        <div class="{{ if eq $count 1 }}col-lg-8 col-md-10{{ else }}col-lg-6 col-md-6{{ end }} mb-4">
          <div class="card h-100" style="border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: transform 0.3s ease, box-shadow 0.3s ease; border: none; overflow: hidden;" 
               onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.12)';" 
               onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.08)';">
            <div class="card-body" style="padding: 2rem;">
              <h4 class="card-title" style="margin-bottom: 0.75rem;">
                <a href="{{ .RelPermalink }}" style="color: #2c3e50; text-decoration: none; font-weight: 600; font-size: 1.4rem; line-height: 1.3;">
                  {{ .Title }}
                </a>
              </h4>
              <p class="text-muted" style="font-size: 0.95rem; margin-bottom: 1rem; font-weight: 500;">
                <i class="far fa-calendar-alt me-1"></i>{{ .Date.Format "January 2, 2006" }}
              </p>
              <p class="card-text" style="color: #555; line-height: 1.7; font-size: 1rem; margin-bottom: 1.5rem;">
                {{ .Summary | default .Params.abstract | truncate 200 }}
              </p>
              
              {{/* Tags */}}
              <div class="mt-auto">
                {{ with .Params.tags }}
                  {{ range . }}
                    <span class="badge bg-light text-dark me-2 mb-2" style="font-size: 0.8rem; padding: 0.4rem 0.8rem; border-radius: 6px; font-weight: 500;">{{ . }}</span>
                  {{ end }}
                {{ end }}
              </div>
              
              {{/* Read More Link */}}
              <div class="mt-3">
                <a href="{{ .RelPermalink }}" class="btn btn-outline-primary btn-sm" style="font-weight: 500; padding: 0.5rem 1.25rem;">
                  Read More <i class="fas fa-arrow-right ms-1"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
        {{ end }}
      </div>

      {{/* Pagination */}}
      {{ if gt $paginator.TotalPages 1 }}
      <div class="row mt-4">
        <div class="col-lg-12">
          <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
              {{ if $paginator.HasPrev }}
              <li class="page-item">
                <a class="page-link" href="{{ $paginator.Prev.URL }}" aria-label="Previous">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
              {{ end }}
              
              {{ range $paginator.Pagers }}
              <li class="page-item {{ if eq . $paginator }}active{{ end }}">
                <a class="page-link" href="{{ .URL }}">{{ .PageNumber }}</a>
              </li>
              {{ end }}
              
              {{ if $paginator.HasNext }}
              <li class="page-item">
                <a class="page-link" href="{{ $paginator.Next.URL }}" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
              {{ end }}
            </ul>
          </nav>
        </div>
      </div>
      {{ end }}
      
    </div>
  </div>

  {{ end }}
</div>

{{ end }}


